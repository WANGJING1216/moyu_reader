# 摸鱼阅读 需求技术文档全局索引

## 使用方法（省 token 版）
- 先确定你要查的范围：`产品需求`、`技术规范`、`某个需求包（如 P0）`。
- 再用关键字检索，不要整篇通读。

## 文档目录约定
- 产品文档目录：`产品文档/`
  - 当前：`产品文档/摸鱼阅读_PRD_v1.3.docx`、`产品文档/摸鱼阅读_PRD_v1.4.docx`
- 原型文档目录：`原型文档/`
  - 当前：`原型文档/moyureader-v2.html`
- 示例数据目录：`samples/txt/`
  - 当前：`samples/txt/chaptered_example.txt`、`samples/txt/plain_example.txt`
- 技术文档目录：`docs/`
  - 总索引：`docs/需求技术文档_全局索引.md`
  - 需求包索引：`docs/P0需求技术文档.md`（后续新增 `docs/xxx需求技术文档.md`）
  - 需求包分册目录：`docs/p0/`（后续新增 `docs/xxx/`）

## 快速检索命令
```bash
# 1) 查产品文档版本
rg -n "PRD|v1\\.[0-9]+" 产品文档 docs

# 2) 查某个需求包（例如 P0）
rg -n "P0-" docs/p0 docs/P0需求技术文档.md

# 3) 查技术主题（模块/路由/验收/数据）
rg -n "阅读核心|菜单与入口|路由|验收|数据" docs

# 4) 查实现与文档映射
rg -n "P0-01|P0-02|P0-03|P0-04" docs lib test

# 5) 查原型交互元素与脚本
rg -n "ctx-menu|font-sheet|reading-row|avatar|bubble-content|devicemotion" 原型文档/moyureader-v2.html

# 6) 查导入联调用示例TXT
rg -n "第[0-9]+章|示例文本|降级策略" samples/txt
```

## 新需求文档规范（统一流程）
后续每次新需求，统一仿造 `P0需求技术文档`：

1. 新建需求总索引
- 文件：`docs/xxx需求技术文档.md`
- 内容结构建议：
  - 使用方法（省 token）
  - 快速检索命令
  - 推荐阅读顺序
  - 维护规则

2. 新建分册目录
- 目录：`docs/xxx/`
- 最少 3 个文件：
  - `docs/xxx/00-总览与映射.md`
  - `docs/xxx/01-技术设计.md`
  - `docs/xxx/02-验收与测试.md`

3. 建立编号映射
- 在 `00-总览与映射.md` 中维护 `xxx-01 ~ xxx-n` 与 PRD章节映射。
- 新增功能先改映射，再改实现和测试。

## 推荐阅读顺序（按任务）
- 做功能：先看 `00-总览与映射.md`，再看 `01-技术设计.md`。
- 做联调：先看路由和数据结构，再看验收指标。
- 做测试：直接看 `02-验收与测试.md` 用例与门禁。

## 维护规则
- PRD 更新：先更新 `产品文档/`，再更新对应 `docs/xxx` 映射与验收。
- 需求变更：只改对应 `xxx` 需求包，避免跨包混改。
- 所有修复与结论同步到 `changeLog.log`。
