# 摸鱼阅读 P0需求技术文档 - 验收与测试

## 6. 性能与验收标准（直接对应PRD第6章）
| 指标 | 技术验收标准 |
|---|---|
| 冷启动时间 | < 2 秒 |
| 50MB TXT导入耗时 | < 3 秒 |
| 章节解析耗时（500章内） | < 1 秒 |
| 气泡滚动帧率 | >=60fps，低端机>=45fps |
| 老板键（+）响应 | < 0.1 秒 |
| 老板键（摇一摇）响应 | < 0.3 秒 |
| 目录页进入时间 | < 0.3 秒 |
| 内存占用 | < 150MB |

## 7. 测试用例最小集合（P0）
- 用例1：首次启动 -> 菜单导入TXT -> 进入阅读 -> 文本可滚动。
- 用例2：长按头像进入目录 -> 点击章节 -> 成功跳转。
- 用例3：阅读中退后台 -> 重启应用 -> 恢复到原章节与偏移。
- 用例4：点击 `+` 触发老板键 -> 进入假聊天列表，耗时达标。
- 用例5：摇一摇触发老板键 -> 进入假聊天列表，耗时达标。
- 用例6：非标准章节TXT导入 -> 自动按 2000 字分节。

## 7.1 P0-04 -> P0-05 重点用例
- 用例A：阅读页点击 `···` -> 点击“导入新书” -> 打开文件选择器成功。
- 用例B：导入 `samples/txt/chaptered_example.txt` -> 成功回到阅读页 -> 大气泡展示导入文本且可滚动。
- 用例C：导入 `samples/txt/plain_example.txt` -> 成功回到阅读页 -> 大气泡展示导入文本且可滚动。
- 用例D：导入失败路径（空文件/不支持格式）-> 显示失败提示且不崩溃。
- 用例E：用户在文件选择器取消选择 -> 阅读页保持原状态，无崩溃。

## 7.2 P0-06/P0-07 联动验收用例（本阶段必须）
- 用例F（GBK）：导入 GBK 编码 TXT，中文显示无乱码。
- 用例G（编码回退）：UTF-8 解码失败后自动回退 GBK 成功。
- 用例H（章节识别）：导入 `chaptered_example.txt` 后章节数 > 1，章节标题可识别。
- 用例I（降级切章）：导入 `plain_example.txt` 后触发按 2000 字切章，目录可见 `第X节`。
- 用例J（本地存储）：导入后重启 App，仍能从本地读取文本与章节索引。

## 8. 出版说明
- 本文档与 `docs/功能条目拆分.md` 一一对应。
- 当 PRD 更新时，优先更新“映射总表”和“技术设计”两部分。
